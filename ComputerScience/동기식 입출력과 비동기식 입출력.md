## 입출력

**입출력(I/O)**이란 컴퓨터 시스템이 컴퓨터 외부의 주변 장치들과 데이터를 주고받는 것

입출력 방식에는 **동기식 입출력**과 **비동기식 입출력**이 있음

### 동기식 입출력(Synchronous)

**동기식 입출력**은 입출력 요청 후 입출력 작업이 완료되어야 프로그램이 다음 명령을 수행할 수 있음

#### blocking 동기 입출력 (구현 1)

프로그램이 디스크에서 어떠한 정보를 읽어오라는 요청을 했을 때, 디스크 입출력이 완료되기까지 일정 시간 소요

이 때, CPU는 입출력이 진행되는 동안 그 프로그램의 다음 명령을 수행하지 않고 대기

입출력이 완료되어 인터럽트를 통해 그 사실이 전달된 후 해당 프로그램이 다음 명령을 수행

따라서, blocking동기식 입출력에서는 입출력 연산이 끝날 때까지 CPU는 아무 일을 할 수 없음

![](https://evan-moon.github.io/static/fe251be8bc28c901b166ea3f99eb1302/0f98f/sync-block.jpg)

#### 단점

CPU의 명령 수행 속도는 빠른 반면 외부 장치에서 데이터를 읽어오는 등의 입출력 연산은 상대적으로 속도가 느린데 

CPU가 입출력이 완료될 때까지 아무 일도 하지 못하기 때문에 자원의 낭비가 발생함.



####  non-blocking 동기 입출력(구현2)

일반적으로 프로그램이 입출력을 수행중인 경우 CPU를 다른 프로그램에게 이양해 CPU가 계속 쉬지 않고 일할 수 있도록 관리.
봉쇄 상태의 프로그램에게는 CPU를 할당하지 않고, CPU를 할당하면 곧바로 작업을 수행할 수 있는 프로그램들에게만 CPU를 할당.

![](https://evan-moon.github.io/static/6395f57fdd8a1d9b8bdbb83621f2157c/0f98f/sync-non-block.jpg)



#### 단점 (다수의 입출력 연산이 동시에 요청되거나 처리되는 경우)

A라는 프로그램이 디스크에 원래 1이던 파일의 내용을 3으로 바꾸는 입출력 연산을 요청했을 때

입출력 연산을 수행중인 A에게서 CPU를 선점해 B에게 할당한 경우

프로그램 B가 CPU를 할당받고 수행중일 때, 이 프로그램 역시 입출력 요청을 할 수 있으며 프로그램 B가 요청한 입출력 연산은 

A가 접근하려는 곳과 동일한 파일의 내용을 1 증가시키는 연산일 때

```null
A => 1->3
B => 1 증가
```

이 경우 매 시점 두 개 이상의 입출력 연산을 수행할 수 있다면, 컨트롤러는 A와 B의 순서를 바꾸어 수행할 가능성이 있음

즉, 1 -> 3 -> 4로 바뀌어야 하는데, 1 -> 2 -> 3으로 바뀔 수도 있음



### 해결 방법

따라서 동기식 입출력에서는 입출력 요청의 동기화를 위해 장치별로 큐(queue)를 두어 요청한 순서대로 처리할 수 있도록 함

프로그램 A가 먼저 요청했으면 이를 먼저 큐에 넣고, 그 후에 발생한 B의 요청을 A의 요청 뒤에 삽입

동기식 입출력은 입출력이 완료될 때까지 입출력과 관련 없는 프로그램을 수행하도록 하고, 요청된 입출력 연산이 완료되면 CPU에게 입출력이 완료되었음을 알려주는 방식으로 진행

연산 완료의 통보는 **인터럽트**를 통해서 수행되며, 이 경우 운영 체제 커널은 인터럽트 처리 루틴으로 가서 입출력 연산을 끝낸 프로그램이 CPU를 할당받을 수 있도록 그 프로그램의 상태를 봉쇄 상태(block state)로부터 해제



## 비동기식 입출력(Asynchronous)

**비동기식 입출력**은 입출력 연산을 요청한 후에 연산이 끝나기를 기다리는 것이 아니라 CPU의 제어권을 입출력 연산을 호출한 그 프로그램에게 곧바로 다시 부여하는 방식

비동기식 입출력에서는 입출력이 필요없는 작업을 먼저 수행하고, 읽어오는 데이터가 반드시 있어야 수행할 수 있는 일들은 입출력이 완료된 후에야 수행

또한, 입출력 요청이 디스크에서 읽어오는 요청이 아니라 디스크에 쓰는 요청이라면 쓰기 작업이 완료되기 전에도 다음 명령을 수행할 수 있으므로 비동기식 입출력이 사용될 수 있음

